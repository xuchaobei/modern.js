(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([["packages_toolkit_main-doc_zh_guides_topic-detail_generator_codesmith_develop_mdx"],{47818:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});!function(e,s){for(var n in s)Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}(s,{frontmatter:function(){return i},toc:function(){return a},title:function(){return c},default:function(){return o}});var r=n("41660");let i={sidebar_position:3},a=[{id:"创建项目",text:"创建项目",depth:2},{id:"添加模板文件",text:"添加模板文件",depth:2},{id:"开发生成器核心逻辑",text:"开发生成器核心逻辑",depth:2},{id:"测试微生成器",text:"测试微生成器",depth:2},{id:"运行微生成器",text:"运行微生成器",depth:2}],c="开发微生成器项目";function l(e){let s=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",div:"div",button:"button",pre:"pre",code:"code",span:"span"},e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"开发微生成器项目",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#开发微生成器项目",children:"#"}),"开发微生成器项目"]}),"\n",(0,r.jsxs)(s.h2,{id:"创建项目",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#创建项目",children:"#"}),"创建项目"]}),"\n",(0,r.jsx)(s.p,{children:"Modern.js 提供了创建微生成器项目的微生成器，可以直接通过以下命令创建微生成器项目："}),"\n",(0,r.jsxs)(s.div,{className:"language-bash",children:[(0,r.jsx)(s.div,{className:""}),(0,r.jsxs)(s.div,{className:"modern-code-content",children:[(0,r.jsx)(s.button,{className:"copy"}),(0,r.jsx)(s.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$ mkdir "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"projectDir"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$ npx @modern-js/codesmith-cli @modern-js/generator-generator"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" 请填写项目名称 "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"generatorName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" 请选择包管理工具 pnpm"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" 请选择开发语言 TS"})]}),"\n",(0,r.jsx)(s.span,{className:"line"})]})})]})]}),"\n",(0,r.jsxs)(s.h2,{id:"添加模板文件",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#添加模板文件",children:"#"}),"添加模板文件"]}),"\n",(0,r.jsx)(s.p,{children:"在项目目录的 templates 文件夹，用于存放生成器需要的模板文件，如果没有模板文件，该步骤可跳过。"}),"\n",(0,r.jsxs)(s.h2,{id:"开发生成器核心逻辑",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#开发生成器核心逻辑",children:"#"}),"开发生成器核心逻辑"]}),"\n",(0,r.jsxs)(s.p,{children:["默认生成的的项目中，已经实现直接拷贝 templates 目录文件至目标项目，可直接在 ",(0,r.jsx)(s.code,{children:"handleTemplateFile"})," 函数中完成生成器的核心逻辑开发。"]}),"\n",(0,r.jsxs)(s.h2,{id:"测试微生成器",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#测试微生成器",children:"#"}),"测试微生成器"]}),"\n",(0,r.jsxs)(s.p,{children:["微生成器开发完成后，需要执行 ",(0,r.jsx)(s.code,{children:"pnpm run build"})," 对代码进行编译，在开发模式下可以使用 ",(0,r.jsx)(s.code,{children:"pnpm run build --watch"})]}),"\n",(0,r.jsx)(s.p,{children:"codesmith 提供了 cli 工具用于运行和测试微生成器，在目标目录执行使用如下命令执行即可："}),"\n",(0,r.jsxs)(s.div,{className:"language-bash",children:[(0,r.jsx)(s.div,{className:""}),(0,r.jsxs)(s.div,{className:"modern-code-content",children:[(0,r.jsx)(s.button,{className:"copy"}),(0,r.jsx)(s.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"npx @modern-js/codesmith-cli "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"generatorPath"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line"})]})})]})]}),"\n",(0,r.jsx)(s.p,{children:"其中 generatorPath 为上述生成器项目的绝对路径。"}),"\n",(0,r.jsxs)(s.h2,{id:"运行微生成器",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#运行微生成器",children:"#"}),"运行微生成器"]}),"\n",(0,r.jsx)(s.p,{children:"生成器发布 npm 包之后，使用如下命令执行："}),"\n",(0,r.jsxs)(s.div,{className:"language-bash",children:[(0,r.jsx)(s.div,{className:""}),(0,r.jsxs)(s.div,{className:"modern-code-content",children:[(0,r.jsx)(s.button,{className:"copy"}),(0,r.jsx)(s.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"npx @modern-js/codesmith-cli "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"generatorName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line"})]})})]})]}),"\n",(0,r.jsx)(s.p,{children:"其中 generatorName 为生成器包名。"}),"\n",(0,r.jsxs)(s.div,{className:"modern-directive info",children:[(0,r.jsx)(s.p,{className:"modern-directive-title",children:"INFO"}),(0,r.jsx)(s.div,{className:"modern-directive-content",children:(0,r.jsxs)(s.p,{children:["\n",(0,r.jsx)(s.code,{children:"@modern-js/create"})," 也支持运行微生成器，可以使用 ",(0,r.jsx)(s.code,{children:"npx @modern-js/create --generator <generatorName>"})," 运行自定义的微生成器。"]})})]})]})}var o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=e.components||{};return s?(0,r.jsx)(s,Object.assign({},e,{children:(0,r.jsx)(l,e)})):l(e)}}}]);