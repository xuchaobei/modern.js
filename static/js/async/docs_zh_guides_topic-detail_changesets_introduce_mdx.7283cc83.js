(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([["docs_zh_guides_topic-detail_changesets_introduce_mdx"],{53849:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});!function(e,s){for(var n in s)Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}(s,{frontmatter:function(){return i},toc:function(){return c},title:function(){return l},default:function(){return t}});var r=n("12151");let i={sidebar_position:1},c=[{id:"特点",text:"特点",depth:2},{id:"初始化",text:"初始化",depth:2},{id:"命令",text:"命令",depth:2}],l="认识 Changesets";function o(e){let s=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",code:"code",div:"div",button:"button",pre:"pre",span:"span"},e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"认识-changesets",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#认识-changesets",children:"#"}),"认识 Changesets"]}),"\n",(0,r.jsxs)(s.p,{children:["Modern.js 默认集成了 ",(0,r.jsx)(s.a,{href:"https://github.com/changesets/changesets",target:"_blank",rel:"nofollow",children:"Changesets"})," 用于模块和 Monorepo 工程方案项目中的包版本管理。"]}),"\n",(0,r.jsxs)(s.h2,{id:"特点",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#特点",children:"#"}),"特点"]}),"\n",(0,r.jsx)(s.p,{children:"Changesets 具有以下几个特点："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["在开发时，需要开发者提供本次变更涉及的包名称、升级版本类型(",(0,r.jsx)(s.code,{children:"pathch"}),"、",(0,r.jsx)(s.code,{children:"minor"}),"、",(0,r.jsx)(s.code,{children:"major"}),")及变更信息，即 changeset。"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"在发布版本时，会根据 changeset 自动升级对应包的版本号，并在对应的包中生成 Changelog 信息。"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"在 Monorepo 场景中，changeset 会自动生成仓库依赖图，升级时只会升级变更包及相关依赖包的版本号。"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"初始化",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#初始化",children:"#"}),"初始化"]}),"\n",(0,r.jsxs)(s.p,{children:["Modern.js 默认创建的模块和 Monorepo 工程方案项目已经初始化完成 Changesets，在项目根目录会自动创建 ",(0,r.jsx)(s.code,{children:".changeset"})," 目录，及 ",(0,r.jsx)(s.code,{children:".changeset/config.json"})," 的配置文件。"]}),"\n",(0,r.jsxs)(s.p,{children:["并且，Modern.js 在其对应的工程方案工具 ",(0,r.jsx)(s.code,{children:"@modern-js/module-tools"})," 和 ",(0,r.jsx)(s.code,{children:"@modern-js/monorepo-tools"})," 提供了 Changesets 相应的命令，无需再手动安装 Changesets 相关依赖。"]}),"\n",(0,r.jsx)(s.p,{children:"Changesets 默认配置如下："}),"\n",(0,r.jsxs)(s.div,{className:"language-json",children:[(0,r.jsx)(s.div,{className:"modern-code-title",children:".changeset/config.json"}),(0,r.jsxs)(s.div,{className:"modern-code-content",children:[(0,r.jsx)(s.button,{className:"copy"}),(0,r.jsx)(s.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,r.jsxs)(s.code,{children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"$schema"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://unpkg.com/@changesets/config@2.0.0/schema.json"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"changelog"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"@changesets/cli/changelog"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"commit"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"linked"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"access"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"restricted"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"baseBranch"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"main"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"updateInternalDependencies"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"patch"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"ignore"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line"})]})})]})]}),"\n",(0,r.jsxs)(s.p,{children:["配置文件提供了生成 Changesets 的一些基本配置，字段详细介绍请参考后续章节： ",(0,r.jsx)(s.a,{href:"/guides/topic-detail/changesets/config.html",children:"Changesets 配置文件"}),"。"]}),"\n",(0,r.jsxs)(s.h2,{id:"命令",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#命令",children:"#"}),"命令"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"change"})," 创建一个 changeset，执行完成该命令后会自动在 ",(0,r.jsx)(s.code,{children:".changeset"})," 目录生成一个 changeset 文件。"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"bump"})," 根据当前 changeset 升级对应包版本号。"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"pre"})," 标记进入和退出 ",(0,r.jsx)(s.code,{children:"pre release"})," 模式，在 ",(0,r.jsx)(s.code,{children:"pre release"})," 模式下执行 ",(0,r.jsx)(s.code,{children:"bump"})," 命令，将会生成 ",(0,r.jsx)(s.code,{children:"x.x.x-${pre-tag}.x"})," 的版本号格式。"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"release"})," 发布包到 NPM。"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"status"})," 查看当前 changeset 状态。"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"gen-release-note"})," 根据当前的 chagneset 状态生成 Release Note 信息。"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"具体命令支持的参数可以查看后续对应章节介绍。"})]})}var t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=e.components||{};return s?(0,r.jsx)(s,Object.assign({},e,{children:(0,r.jsx)(o,e)})):o(e)}}}]);