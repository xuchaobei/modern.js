(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([["packages_toolkit_main-doc_en_guides_topic-detail_model_test-model_mdx"],{54495:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});!function(e,s){for(var n in s)Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}(s,{frontmatter:function(){return r},toc:function(){return l},title:function(){return t},default:function(){return c}});var o=n("41660");let r={sidebar_position:9,title:"Test Model"},l=[],t="Test Model";function i(e){let s=Object.assign({h1:"h1",a:"a",p:"p",code:"code",div:"div",button:"button",pre:"pre",span:"span"},e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.h1,{id:"test-model",children:[(0,o.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#test-model",children:"#"}),"Test Model"]}),"\n",(0,o.jsxs)(s.p,{children:["Testing is crucial for the stability of code. Here's an example using the ",(0,o.jsx)(s.code,{children:"countModel"})," from ",(0,o.jsx)(s.a,{href:"/en/guides/topic-detail/model/quick-start.html",children:"Quick Start"})," to demonstrate how to perform unit testing on a Model in Modern.js."]}),"\n",(0,o.jsxs)(s.p,{children:["To use the testing feature, you need to first enable it. In the project root directory, execute ",(0,o.jsx)(s.code,{children:"pnpm run new"})," and make the following selection:"]}),"\n",(0,o.jsxs)(s.div,{className:"language-bash",children:[(0,o.jsx)(s.div,{className:""}),(0,o.jsxs)(s.div,{className:"modern-code-content",children:[(0,o.jsx)(s.button,{className:"copy"}),(0,o.jsx)(s.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,o.jsxs)(s.code,{children:[(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Please "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"select"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" the operation you want to perform: Enable optional features"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Enable optional features Enable "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Unit Testing / Integration Testing"'}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" feature"})]}),"\n",(0,o.jsx)(s.span,{className:"line"})]})})]})]}),"\n",(0,o.jsx)(s.p,{children:"This will enable testing feature support."}),"\n",(0,o.jsxs)(s.p,{children:["Create a new file called ",(0,o.jsx)(s.code,{children:"count.test.ts"})," with the following code:"]}),"\n",(0,o.jsxs)(s.div,{className:"language-ts",children:[(0,o.jsx)(s.div,{className:""}),(0,o.jsxs)(s.div,{className:"modern-code-content",children:[(0,o.jsx)(s.button,{className:"copy"}),(0,o.jsx)(s.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,o.jsxs)(s.code,{children:[(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { createStore } "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@modern-js/runtime/testing'"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" countModel "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./count'"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,o.jsx)(s.span,{className:"line"}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"describe"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'test model'"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"it"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'count value should plus one after add'"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"store"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"createStore"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"state"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"add"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" }] "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"store"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".use"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(countModel);"})]}),"\n",(0,o.jsx)(s.span,{className:"line"}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"expect"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(state)"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".toEqual"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({ value"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" });"})]}),"\n",(0,o.jsx)(s.span,{className:"line"}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,o.jsx)(s.span,{className:"line"}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"expect"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"store"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".use"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(countModel)["}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"])"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".toEqual"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({ value"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" });"})]}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  });"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,o.jsx)(s.span,{className:"line"})]})})]})]}),"\n",(0,o.jsxs)(s.div,{className:"modern-directive info",children:[(0,o.jsx)(s.p,{className:"modern-directive-title",children:"INFO"}),(0,o.jsx)(s.div,{className:"modern-directive-content",children:(0,o.jsxs)(s.p,{children:["\nThe ",(0,o.jsx)(s.a,{href:"/en/apis/app/runtime/model/create-store.html",children:(0,o.jsx)(s.code,{children:"createStore"})})," used here is imported from ",(0,o.jsx)(s.code,{children:"@modern-js/runtime/testing"}),", which internally uses the configuration of ",(0,o.jsx)(s.a,{href:"/en/configure/app/runtime/state.html",children:(0,o.jsx)(s.code,{children:"runtime.state"})})," to create a ",(0,o.jsx)(s.code,{children:"store"}),"."]})})]}),"\n",(0,o.jsxs)(s.p,{children:["In the test case, we create a new ",(0,o.jsx)(s.code,{children:"store"})," to mount ",(0,o.jsx)(s.code,{children:"countModel"}),", use ",(0,o.jsx)(s.code,{children:"store.use"})," to get the State and Actions of ",(0,o.jsx)(s.code,{children:"countModel"}),". Then, we call the ",(0,o.jsx)(s.code,{children:"add"})," Action to update the state and assert the updated state value."]}),"\n",(0,o.jsxs)(s.p,{children:["Execute the ",(0,o.jsx)(s.code,{children:"pnpm run test"})," command to trigger the execution of the test case."]})]})}var c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=e.components||{};return s?(0,o.jsx)(s,Object.assign({},e,{children:(0,o.jsx)(i,e)})):i(e)}}}]);