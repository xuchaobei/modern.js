(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([["packages_toolkit_main-doc_en_guides_advanced-features_testing_mdx"],{99138:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});!function(e,s){for(var n in s)Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}(s,{frontmatter:function(){return r},toc:function(){return i},title:function(){return o},default:function(){return a}});var t=n("41660");let r={sidebar_position:10,title:"Testing"},i=[{id:"test-file",text:"Test file",depth:2},{id:"usage",text:"Usage",depth:2},{id:"transform",text:"transform",depth:2}],o="Testing";function l(e){let s=Object.assign({h1:"h1",a:"a",p:"p",code:"code",div:"div",button:"button",pre:"pre",span:"span",h2:"h2"},e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.h1,{id:"testing",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#testing",children:"#"}),"Testing"]}),"\n",(0,t.jsxs)(s.p,{children:["Modern.js inherits the testing capabilities of ",(0,t.jsx)(s.a,{href:"https://jestjs.io/",target:"_blank",rel:"nofollow",children:"Jest"})," by default."]}),"\n",(0,t.jsxs)(s.p,{children:["First need to execute ",(0,t.jsx)(s.code,{children:"pnpm run new"})," enable [unit test/integration test] features:"]}),"\n",(0,t.jsxs)(s.div,{className:"language-text",children:[(0,t.jsx)(s.div,{className:""}),(0,t.jsxs)(s.div,{className:"modern-code-content",children:[(0,t.jsx)(s.button,{className:"copy"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"? Action: Enable features\n? Enable features: Enable Unit Test / Integration Test\n"})})]})]}),"\n",(0,t.jsxs)(s.p,{children:["After executing the above command, the ",(0,t.jsx)(s.code,{children:'"test": "modern test"'})," command will be automatically generated in package.json."]}),"\n",(0,t.jsxs)(s.p,{children:["register plugin in ",(0,t.jsx)(s.code,{children:"modern.config.ts"}),":"]}),"\n",(0,t.jsxs)(s.div,{className:"language-ts",children:[(0,t.jsx)(s.div,{className:"modern-code-title",children:"modern.config.ts"}),(0,t.jsxs)(s.div,{className:"modern-code-content",children:[(0,t.jsx)(s.button,{className:"copy"}),(0,t.jsx)(s.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,t.jsxs)(s.code,{children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" testPlugin "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@modern-js/plugin-testing'"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,t.jsx)(s.span,{className:"line"}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"defineConfig"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  plugins"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"testPlugin"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()]"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,t.jsx)(s.span,{className:"line"})]})})]})]}),"\n",(0,t.jsxs)(s.h2,{id:"test-file",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#test-file",children:"#"}),"Test file"]}),"\n",(0,t.jsxs)(s.p,{children:["Modern.js default recognized test file paths are: ",(0,t.jsx)(s.code,{children:"<rootDir>/src/**/*.test.[jt]s?(x)"})," and ",(0,t.jsx)(s.code,{children:"<rootDir>/tests/**/*.test.[jt]s?(x)"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["If you need to customize the test directory, you can configure it with ",(0,t.jsx)(s.a,{href:"/en/configure/app/tools/jest.html",children:"tools.jest"}),"."]}),"\n",(0,t.jsxs)(s.h2,{id:"usage",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#usage",children:"#"}),"Usage"]}),"\n",(0,t.jsxs)(s.p,{children:["Modern.js test support ",(0,t.jsx)(s.a,{href:"https://testing-library.com/docs/",target:"_blank",rel:"nofollow",children:"testing-library"}),". API can be imported from ",(0,t.jsx)(s.code,{children:"@modern-js/runtime/testing"}),"."]}),"\n",(0,t.jsxs)(s.div,{className:"language-text",children:[(0,t.jsx)(s.div,{className:""}),(0,t.jsxs)(s.div,{className:"modern-code-content",children:[(0,t.jsx)(s.button,{className:"copy"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"import { render, screen } from '@modern-js/runtime/testing';\n"})})]})]}),"\n",(0,t.jsxs)(s.p,{children:["Other Modern.js supported testing APIs can be found ",(0,t.jsx)(s.a,{href:"/en/apis/app/runtime/testing/cleanup.html",children:"here"}),"."]}),"\n",(0,t.jsxs)(s.h2,{id:"transform",children:[(0,t.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#transform",children:"#"}),"transform"]}),"\n",(0,t.jsxs)(s.p,{children:["Modern.js tests use ",(0,t.jsx)(s.a,{href:"https://www.npmjs.com/package/babel-jest",target:"_blank",rel:"nofollow",children:"babel-jest"})," for source code compilation by default. If you need to use ",(0,t.jsx)(s.a,{href:"https://github.com/kulshekhar/ts-jest",target:"_blank",rel:"nofollow",children:"ts-jest"}),", you can configure it through ",(0,t.jsx)(s.a,{href:"/en/configure/app/testing/transformer.html",children:"testing.transform"}),"."]})]})}var a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=e.components||{};return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(l,e)})):l(e)}}}]);