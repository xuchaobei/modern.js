(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([["packages_toolkit_main-doc_zh_apis_app_hooks_config_upload_mdx"],{73027:function(s,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(s,e){for(var r in e)Object.defineProperty(s,r,{enumerable:!0,get:e[r]})}(e,{frontmatter:function(){return i},toc:function(){return l},title:function(){return o},default:function(){return a}});var n=r("41660");let i={title:"upload/",sidebar_position:4},l=[{id:"说明",text:"说明",depth:2},{id:"场景",text:"场景",depth:2},{id:"代码压缩",text:"代码压缩",depth:2},{id:"更多用法",text:"更多用法",depth:2}],o="upload/";function c(s){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",div:"div",button:"button",pre:"pre",span:"span"},s.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h1,{id:"upload",children:[(0,n.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#upload",children:"#"}),"upload/"]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"upload/"})," 目录中可以放置任意格式的静态资源文件。"]}),"\n",(0,n.jsxs)(e.h2,{id:"说明",children:[(0,n.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#说明",children:"#"}),"说明"]}),"\n",(0,n.jsxs)(e.p,{children:["在开发环境下，该目录下的静态资源文件会被托管在 ",(0,n.jsx)(e.code,{children:"/upload"})," 路径下。构建应用产物后，该目录下的文件会被复制到产物目录中。"]}),"\n",(0,n.jsx)(e.p,{children:"该文件约定主要用于开发者使用插件，主动上传静态资源文件到 CDN。"}),"\n",(0,n.jsxs)(e.h2,{id:"场景",children:[(0,n.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#场景",children:"#"}),"场景"]}),"\n",(0,n.jsxs)(e.p,{children:["例如 ",(0,n.jsx)(e.code,{children:"google-analysis.js"})," 等项目自用的 SDK（通常需要 http 缓存）。"]}),"\n",(0,n.jsx)(e.p,{children:"图片、字体文件、通用 CSS 等。"}),"\n",(0,n.jsxs)(e.h2,{id:"代码压缩",children:[(0,n.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码压缩",children:"#"}),"代码压缩"]}),"\n",(0,n.jsxs)(e.p,{children:["如果目录下的文件是一个 ",(0,n.jsx)(e.code,{children:".js"})," 文件，在生产环境构建时，会自动对其进行代码压缩。"]}),"\n",(0,n.jsxs)(e.p,{children:["如果该文件以 ",(0,n.jsx)(e.code,{children:".min.js"})," 结尾，则不会经过代码压缩处理。"]}),"\n",(0,n.jsxs)(e.h2,{id:"更多用法",children:[(0,n.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#更多用法",children:"#"}),"更多用法"]}),"\n",(0,n.jsxs)(e.p,{children:["在 React 组件中，可以通过",(0,n.jsx)(e.a,{href:"/guides/basic-features/env-vars.html#asset_prefix",children:"内置环境变量"}),"来添加该前缀："]}),"\n",(0,n.jsxs)(e.div,{className:"language-tsx",children:[(0,n.jsx)(e.div,{className:""}),(0,n.jsxs)(e.div,{className:"modern-code-content",children:[(0,n.jsx)(e.button,{className:"copy"}),(0,n.jsx)(e.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    <"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"img"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"src"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"{"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"${"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"process"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"env"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"ASSET_PREFIX"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"}"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"/upload/banner.png`"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"}></"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"img"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:">"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  );"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"};"})}),"\n",(0,n.jsx)(e.span,{className:"line"})]})})]})]}),"\n",(0,n.jsxs)(e.p,{children:["另外，不论是在",(0,n.jsx)(e.a,{href:"/guides/basic-features/html.html",children:"自定义 HTML"})," 中，或是在 ",(0,n.jsx)(e.a,{href:"/apis/app/hooks/config/public.html",children:(0,n.jsx)(e.code,{children:"config/public/"})})," 下的任意 HTML 文件中，都可以直接使用 HTML 标签引用 ",(0,n.jsx)(e.code,{children:"config/upload/"})," 目录下的资源："]}),"\n",(0,n.jsxs)(e.div,{className:"language-html",children:[(0,n.jsx)(e.div,{className:""}),(0,n.jsxs)(e.div,{className:"modern-code-content",children:[(0,n.jsx)(e.button,{className:"copy"}),(0,n.jsx)(e.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"<"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"script"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"src"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/upload/index.js"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"></"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"script"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:">"})]}),"\n",(0,n.jsx)(e.span,{className:"line"})]})})]})]}),"\n",(0,n.jsxs)(e.p,{children:["如果设置了 ",(0,n.jsx)(e.a,{href:"/configure/app/dev/asset-prefix.html",children:(0,n.jsx)(e.code,{children:"dev.assetPrefix"})})," 或 ",(0,n.jsx)(e.a,{href:"/configure/app/output/asset-prefix.html",children:(0,n.jsx)(e.code,{children:"output.assetPrefix"})})," 前缀，也可以直接使用模板语法添加该前缀："]}),"\n",(0,n.jsxs)(e.div,{className:"language-html",children:[(0,n.jsx)(e.div,{className:""}),(0,n.jsxs)(e.div,{className:"modern-code-content",children:[(0,n.jsx)(e.button,{className:"copy"}),(0,n.jsx)(e.pre,{className:"shiki",style:{backgroundColor:"var(--shiki-color-background)"},children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"<"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"script"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"src"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"<%=assetPrefix %>/upload/index.js"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"></"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"script"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:">"})]}),"\n",(0,n.jsx)(e.span,{className:"line"})]})})]})]}),"\n",(0,n.jsxs)(e.div,{className:"modern-directive info",children:[(0,n.jsx)(e.p,{className:"modern-directive-title",children:"INFO"}),(0,n.jsx)(e.div,{className:"modern-directive-content",children:(0,n.jsxs)(e.p,{children:["\nModern.js 没有支持在 ",(0,n.jsx)(e.code,{children:"config/public/*.css"}),"（例如 background-image）中通过 URL 使用 ",(0,n.jsx)(e.code,{children:"config/upload/"})," 下的文件。"]})})]})]})}var a=function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,Object.assign({},s,{children:(0,n.jsx)(c,s)})):c(s)}}}]);